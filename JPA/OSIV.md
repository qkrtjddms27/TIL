# OSIV, Open Session in view

- OSIV 전략은 트랜잭션 시작처럼 최초 데이터베이스 커넥션 시작 시점부터 API응답이 끝날 때 까지 영속성 컨텍스트와 데이터베이스 커넥션을 유지한다.
  + View Template이나 API 컨트롤러에서 지연 로딩이 가능한 이유가 OSIV 전략 덕분이다.
  + 지연 로딩은 영속성 컨텍스트가 살아있어야 가능하고, 영속성 컨텍스트는 기본적으로 데이터베이스 커넥션을 유지한다.

- 이 전략은 너무 오랜시간동안 데이터베이스 커넥션 리소스를 사용하기 떄문에, 실시간 트래픽이 중요한 애플리케이션에서는 커넥션이 모자랄 수 있다.
  + 이것은 결국 장애로 이어진다.
  + 컨트롤러에서 외부 API를 호출하면 외부 API 대기 시간 만큼 커넥션 리소스를 반환하지 못하고, 유지해야 한다.

```
spring.jpa.open-in-view: false
```

- 크고 복잡한 애플리케이션을 개발한다면, 이 둘의 관심사를 명확하게 분리하는 선택은 유지보수 관점에서 충분히 의미가 있다.
  + OrderService -> OrderService, OrderQueryService