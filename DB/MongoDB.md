## MongoDB

### NoSQL
- Not Only SQL은 SQL 뿐만 아니다라는 의미를 지니고 있다.
- SQL을 사용하는 관계형 데이터베이스가 아닌 데이터베이스를 의미한다.

### NoSQL의 장점.
- 수평 확장 가능한 분산 시스템
- Schema-less
- 완화된 ACID

### ACID
- 원자성, 일관성, 고립성, 지속성
- 데이터베이스 트랜잭션이 안전하게 수행된다는 것을 보장하기 위한 성질을 가리키는 약어.
    - 원자성
        - 트랜잭션과 관련된 작업들이 부분적으로 실행되다가 않는 것을 보장하는 능력.
        - 중간단계까지 실행되고 실패하는 일이 없도록 하는 것.
    - 일관성
        - 트랜잭션이 실행을 성공적으로 완료하면 언제나 일관성 있는 데이터베이스르 상태로 유지하는 것을 의미.
        - 무결성 제약이 모든 계좌는 잔고가 있어야 한다면 이를 위반하는 트랜잭션은 중단된다.
    - 독립성
        - 트랜잭션 수행 시 다른 트랜잭션은 연산 작업이 끼어들지 못하다록 보장하는 것.
        - 트랜잭션 밖에 있는 어떤 연산도 중간 단계의 데이터를 볼 수 없음.
    - 지속성
        - 성공적으로 수행된 트랜잭션은 영원히 반영되어야함.
        - 시스템 문제, DB 일관성 체크 등을 하더라도 유지되어야 함.
    
### MongoDB의 특징
- Document
    + MongoDB는 Document 기반 데이터베이스
    + DataBase > Collection > Document > Field 계층으로 이루어져 있다.
    + Document는 Row에 해당한다.
    + MongoDB는 BSON으로 데이터가 쌓이기 때문에 Array 데이터나 Nested한 데이터를 쉽게 넣을 수 있다.
    
- ObjectId
    + 관계형 데이터베이스에 Primary Key
    + ObjectId는 클라이언트에서 생성.
    + 클러스터에서 Sharding 된 데이터를 빠르게 가져오기 위함.
    
- BASE
    + BASE는 ACID와 대립되는 개념으로 세 가지로 이루어져있다.
    + Basically Avaliable
        * 기본적으로 언제든지 사용할 수 있다는 의미를 가지고 있다.
        * 즉, 가용성이 필요하다는 뜻을 가진다.
    + Soft state
        * 외부의 개입이 없어도 정보가 변경될 수 있다는 의미를 가지고 있다.
        * 네트워크 파티션 등 문제가 발생되어 일관성이 유지된지 않는 경우 일관성을 위해 데이터를 자동으로 수정한다.
    + Eventually consistent
        * 일시적으로 일관적이지 않은 상태가 되어도 일정 시간 후 일관적인 상태가 되어야한다는 의미를 가지고 있다.
        * 장애 발생시 일관성을 유지하기 위한 이벤트를 발생시킨다.
  
- Open Source

### CAP이론
- 일관성, 가용성, 분할 내성을 만족할 수 없다는 이론.
- 일관성 : 모든 노드가 같은 시간에 같은 데이터를 볼 수 있다는 의미를 지닌다.
- 가용성
    + 모든 요청에 성공 혹은 실패 결과를 반환 할 수 있다는 의미를 지닌다.
    + 하나의 노드가 망가져도 다른 노드를 통해 데이터를 제공할 수 있다면 가용성이 있는 시스템이다.
    + 만약 살아났을 때 다른 노드와 데이터가 다르다면 일관성이 떨어지는 시스템이다.
- 분할 내성
    + 통신에 실패해도 시스템이 계속 동작해야한다는 의미.
    + 둘 사이 통신이 망가져서 동기화가 불가능해진다면 일관성이 떨어진다.
    + 통신이 복구되고 동기화되는 것을 기다린다면 가용성이 떨어진다.
    
