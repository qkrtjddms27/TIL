# 멤버 클래스는 되도록 static으로 만들라

## 중첩 클래스, nested class
- 다른 클래스 안에 정의된 클래스를 말한다.
- 자신을 감싼 바로 바깥 클래스에서만 쓰여야 한다.
  + 해당 경우가 아니라면 톱 클래스로 만들어야 한다.
- 정적 멤버 클래스, (비 정적)멤버 클래스, 익명 클래스, 지역 클래스 4가지로 나뉜다

### 정적 멤버 클래스
- 구문상 차이는 static을 붙이거나 안붙이거나
- 바깥 클래스와 함께 쓰일 때만 유용한 public 보조 클래스로 쓰인다.
- 정적 클래스는 Calculator.Operation.PLUS나 Calculator.Operation.MINUS 같은 형태로 원하는 연산을 참조할 수 있다.

### 비정적 멤버 클래스
- 비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다.
  + 인스턴스 메서드에서 정규화된 this를 사용해 바깥 인스턴스의 메서드를 호출하거나 바깥 인스턴스의 참조를 가져올 수 있다.
  + 정규화된 this는 클래스명.this 형태로 바깥 클래스의 이름을 명시하는 용법.
- 비정적 멤버 클래스의 인스턴스와 바깥 인스턴스 사이의 관꼐는 멤버 클래스가 인스턴스화될 때 확립되며, 관계는 변경이 불가능하다.
- 수동으로 직접 생성할 수 있지만, 메모리 공간을 차지하며, 생성시간도 더 오래 걸린다.
- 어댑터를 정의할 때 자주 사용된다.
  + 어댑터 패턴 : 한 클래스의 인터페이스를 사용하고자 하는 다른 인터페이스로 변환할 때 주로 사용.
  + Set과 List 같은 다른 컬렉션 인터페이스 구현들도 자신의 반복자를 구현할 때 비정적 멤버 클래스를 주로 사용한다.
  
#### 비정적이 아닌 정적 멤버 클래스로 만들면 좋은 이유
- 바깥 인스턴스로의 숨은 외부 참조를 갖게 되고, 해당 참조를 저장하려면 시간과 공간이 소비된다.
  + 해당 참조는 눈에 보이지 않아 메모리 누수로 이어짐.

### 익명 클래스
- 선언한 지점에서만 인스턴스를 만들 수 있고, 클래스의 이름이 필요한 작업(instanceof)를 수행할 수 없다.
- 여러 인터페이스를 구현할 수 없고, 인터페이스를 구현하는 동시에 다른 클래스를 상속할 수도 없다.
- 익명 클래스는 자바 표현식 중간에 등장하므로, 짧지 않으면 가독성을 떨어뜨릔다.
- 현재는 익명 클래스보다는 람다식이 대신 사용된다.

### 지역 클래스
- 지역변수를 선언할 수 있는 곳이면 어느곳이든 사용할 수 있다.
  + 메서드 안에서 사용될 수 있다.
- 멤버 클래스처럼 이름이 있고 반복해서 사용할 수 있다.
- 익명 클래스처러 비정적 문맥에서 사용될 때만 바깥 인스턴스를 참조할 수 있다.

### 정리
- 중첩 클래스는 4가지가 있다.
- 메서드 밖에서도 사용해야 하거나 메서드 안에 정의하기 너무 길다면 멤버 클래스로 만든다.
- 멤버 클래스의 ㅇ인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적, 그렇지 않으면 정적으로 만든다.
- 중첩 클래스가 한 메서드 안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 익명 클래스로 만들고, 그렇지 않으면 지역 클래스로 만들자.


